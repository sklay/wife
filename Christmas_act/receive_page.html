<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>圣诞快乐</title>
		<meta name="description" content="我在【药快到】参加了肺活量测试，结果超乎想象，你能超过我吗？"/>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta content="telephone=no" name="format-detection" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<script src="js/zepto.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/touch.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/fx.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/common.js" type="text/javascript" charset="utf-8"></script>
		<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>
 		
		<script>
			var _hmt = _hmt || [];
			(function() {
			  var hm = document.createElement("script");
			  hm.src = "//hm.baidu.com/hm.js?ad944074f96dc318a2bb2265b8eb4c31";
			  var s = document.getElementsByTagName("script")[0]; 
			  s.parentNode.insertBefore(hm, s);
			})();
		</script>
		<script>
		    (function (doc, win) {
		        var docEl = doc.documentElement,
		                resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
		                recalc    = function () {
		                    var clientWidth = docEl.clientWidth;
		                    if (clientWidth>=640) {
		                        clientWidth = 640;
		                    };
		                    if (!clientWidth) return;
		                    docEl.style.fontSize = 100 * (clientWidth / 640) + 'px';
		                };
		        if (!doc.addEventListener) return;
		        win.addEventListener(resizeEvt, recalc, false);
		        doc.addEventListener('DOMContentLoaded', recalc, false);
		    })(document, window);
		</script>
		<style>
			*{margin:0;padding:0;}
			body{font-size:14px;width:100%;font-family:"微软雅黑","宋体",Arial;overflow:hidden;}
			 a{color:inherit;text-decoration:none;}
		
	  	/*领取页面*/
		.receive_page{position: absolute;
			/*display:none;*/width: 100%;background: url(images/act_receivePage_Bj.jpg)top center no-repeat ;
			background-size:100% 100%;height: 100%;
			}
		.receive_codeTitle{margin:0 auto;width:6.4rem;padding-top: 1.2rem;}
		.receive_codeTitle img{width: 100%;}
		.receive_page_coupon{margin:0 auto .1rem;width:5rem; }
		.receive_page_coupon img{width: 100%;}
		
		.commomLogin{
			width:100%;box-sizing:border-box;margin:0 auto;font-family:"黑体",arial;
			}
		.commomLogin input{text-align:center;box-sizing:border-box;height:38px;margin-left:.8rem;
			border:1px solid #fff;background:transparent;border-radius:8px;
		}
		.commomLogin #commomLogin_phoneNum{width:4.8rem;display:block;}
		#commomLogin_codeNum{width:42%;float:left;}
		.commomLogin_getcodeagain{display:none;}
		#commomLogin_getcode{  float: right; width: 24%; height: 35px;
		  box-sizing: border-box;border-radius: 8px;background: #e60012;
		  font-size: 12px;text-align: center;margin-right:1rem;color: #fff;
		  }
		#commomLogin_getcode .commomLogin_getcodeagain{font-size:10px;line-height:17px;}
		#commomLogin_getcode .commomLogin_getcodeagain var{font-style:normal;}
		::-moz-placeholder {
		    color: #fff;
		}
		:-ms-input-placeholder {
		    color: #fff;
		}
		::-webkit-input-placeholder {
		    color: #fff;
		}
		#loginsumbit{margin:.3rem auto 0;text-align:center;}
		#loginsumbit img{width: 2.8rem;} 
			
			
			.have_received ,.receive_success{display:none;position: fixed; width: 100%; 
   			height: 100%;  z-index: 11;top: 0;background-color: rgba(50, 50, 50, 0.26);
   			}	
		/*领取成功页和已领取页*/
		.common_boxSty {  display:none;position: fixed; width: 100%; 
		   			height: 100%;  z-index: 110;top: 0;background-color: rgba(0, 0, 0,.5);}
		.common_titleSty img{width: 100%;}
		.common_titleSty img:nth-child(2){position: absolute;
		  						top:2.4rem;}
		.have_received_title img{  width:100%;}				
		.common_titleSty{position:relative;width:5rem;margin:2.7rem auto 0}
		.common_descSty img{width: .5rem; float: left; margin: .1rem .2rem 0 2rem;}
		.common_descSty p{color: #fff; font-size: 16px;line-height: 40px;}
		.closeShade{width: 60px;float:right;color:#fff;font-size:16px; text-align: center;
			    height: 60px; 
			    border-radius: 15px; position: absolute;top:1.7rem; right: .6rem;}
		.closeShade span{width:20px;height:20px;line-height:20px;border:.03rem solid #fff;display:block;margin:0 auto;border-radius:50%;}
		 
		  .use_btn{font-size: 16px; color: #fff;float: left; background-color: #ff1515;
				    width: 30%;font-family:"黑体"; line-height: 37px;border-radius: 7px;
				    border: none;margin-left: 19%;display: block;
				    background-size: .5rem 1rem;text-align: center;
				    }
		 .common_useStyle p{color: #fff;font-size: 20px;position: absolute; left: 44%;
				    font-weight: 600;
				    line-height: 1.6rem;
				    }
			     #long_ShareFri{ margin: 5% 33%;}
			     #small_ShareFri{margin-left: 3%;}
			     .shareFri{font-size: 16px; color: #fff;  background-color: #ff1515;
				    width: 30%;line-height: 37px; border-radius: 7px;  border: none;font-family:"黑体";
		   			}
		.shareAppPage{display: none;margin-top: 5%;}
/*.shareFri img{width: 3.5rem;margin-left:1.5rem;}
 #small_ShareFri {margin-left: 4%; width:2.2rem;}
#shareAppPage{
			width:100%;height:100%;border:none;border-radius:0;position:fixed;
			display:none;z-index:1000;top:0;left:0;background:rgba(50,50,50,.8);margin:0;box-sizing:border-box;
			padding-top:4rem;
			}
#shareAppPage button{
			width:2.5rem;padding:10px 20px;font-family:"黑体";float:left;background:#00d0ff;border:none;
			margin-left:.5rem;border-radius: 6px;
			}
 #shadeWaitDiv{position:fixed;top:0;left:0;background:rgba(0,0,0,.3);z-index:999;height:100%;width:100%;}   */
 #waitAll {position:absolute;width:1rem;z-index:1000;top: 4rem;left: 2.7rem;}
 #waitAll img{width:1rem;}
		</style>	
	</head>	
	
	<body>
		<div class="receive_page getHbPage_wrap commonPage_wrapStyle" id="getHBPage">
			<div class="receive_codeTitle recePage_Width">
			 	<img  src="images/act_receive_title.png" alt=""/>
			</div>
			<div class="receive_code receivePageCont" id="receive_page">
				<div class="receive_page_coupon recePage_Width" id="receive_page_coupon">
		            <img  src="images/act_receive_coupon.png" alt=""/>
		        </div>
		        <div class="loginnow" id="loginnow">
					<div class="commomLogin">
						<input type="text" placeholder="请输入手机号码" id="commomLogin_phoneNum"/>
						<p id="commomLogin_loginwarn" style="font-size:12px;padding-left:54px;color:#fff;line-height:20px;">为保证您能成功领取奖品，请如实填写</p>
						<div style="width:100%;overflow:hidden;margin-top:.1rem;">
							<input type="text" placeholder="输入验证码" id="commomLogin_codeNum"/>
							<div id="commomLogin_getcode">
								<span class="commomLogin_getcode" style="line-height:35px;">获取验证码</span>
								<span class="commomLogin_getcodeagain"><var style="color:#ff0000">60</var>秒后<br/>重新获取</span>
							</div>
						</div>
						
						<div id="loginsumbit">
							<img src="images/act_receive_btn.png" />
						</div>
					</div>
				</div>
			</div>
			<!---成功领取-->
        	<div class="receive_success_box receivePageCont common_boxSty" >
        		<div class="closeShade closeAndBackClick">
        			<span>X</span>
        		</div>
        	 	<div class="receive_success_title common_titleSty ">
		            <img  src="images/act_receive_coupon.png" alt=""/>
	       		</div>
			   <div class="receive_success_desc common_descSty">
			        <img src="images/aids_receiveSuccess_icon.png" alt=""/>
			        <p class="commom_desc_psty2">领取成功啦！</p>
			    </div>
			    <div class="common_useStyle" style="margin-top:.3rem">
				    <a id="downloadA" href="http://a.app.qq.com/o/simple.jsp?pkgname=com.camore.yaodian.activity&g_f=991653">
				        <button class="use_btn">去使用</button>
				    </a>
			    	<button class="shareFri " id="small_ShareFri" >邀请好友</button>
			  	</div>
        	</div>
    			<!--已经领过-->
			<div class="have_received_box receivePageCont common_boxSty" >
			    <div class="closeShade closeAndBackClick">
        			<span>X</span>
        		</div>
			     <div class="have_received_title common_titleSty">
				  	<img  src="images/act_hasGot_coupon.png" alt=""/>
				  </div>
			      <div class="have_received_desc common_descSty">
			      	<p style="font-size:.3rem;text-align: center;">领取成功啦！</p>
			        <p class="commom_desc_psty1" style="font-size:.3rem;text-align: center;">快邀请小伙伴们一起来定制专属祝福吧！</p>
			      </div>
			      <button class="shareFri " id="long_ShareFri" style="  width: 35%;line-height: 43px;">邀请好友</button>
			</div>
		</div>
	</body>
	<script>
	$(function(){
		
		
		$("#receive_page").on("click","#commomLogin_getcode",function(){
				getCodeCommon("comValCodeAjax");
			});
			$("#receive_page").on("click","#loginsumbit",function(){
				submitPhoneCodeCommon("receiveLungReward",function(){
					$(".receive_code").hide();
				  	$(".receive_success_box").show();
				  	
				},function(){
					$(".receive_code").hide();
				  	$(".have_received_box").show(); 
				});
			});
	
		 //领取事件
	 var time1=null;
		function getCodeCommon(url,otherInfoSubmit){
			waitShow();
			if($("#commomLogin_getcode").attr("noclick")){
				waitClose();
				return false;
			};
			var $_phoneno=$("#commomLogin_phoneNum").val();
			var regno = /1[3-8]+\d{9}/;
			if (!regno.test($_phoneno)) {
				alert("请输入正确的手机号！");
				waitClose();
				return false;
			};
			$("#commomLogin_getcode").attr("noclick",true);
			var _url=url;
			var _otherInfoSubmit=otherInfoSubmit?otherInfoSubmit : "";
			var n=60;
			$.ajax({
				type:"post",
	 			url:_url,
	 			data:"phoneNum="+$_phoneno+"&"+_otherInfoSubmit,
	 			success:function(result){
	 				waitClose();
	 				if (result.result == "succ") {
						$("#commomLogin_getcode").css('background','#ccc');
						$(".commomLogin_getcode").hide();
						$(".commomLogin_getcodeagain").show();
						$("#commomLogin_loginwarn").html("验证码短信已发送至您的手机");
						time1=setInterval(function(){
							n--;
							$(".commomLogin_getcodeagain var").html(n);
							if(n<=0){
								getedHandle();
							}
						},1000)
		    		}else{
		    			waitClose();
		    			alert(result.message);
		    			$("#commomLogin_getcode").removeAttr("noclick");
		    		}
	 			},error:function(){
	 				waitClose();
	 				alert("发送请求失败");
	 				$("#commomLogin_getcode").removeAttr("noclick");
		        }
			});
		};
		
		function submitPhoneCodeCommon(url,succFun,receivedFun,otherInfoSubmit){
			waitShow();
			var _otherInfoSubmit=otherInfoSubmit?otherInfoSubmit:"";
	 		$_phoneno=$("#commomLogin_phoneNum").val();
	 		$_code=$("#commomLogin_codeNum").val()
	 		var regno = /1[3-8]+\d{9}/;
	 		if($_phoneno==""||$_phoneno=="请输入手机号码"||!regno.test($_phoneno)){
	 			waitClose();
	 			alert("请输入正确的手机号码")
	 			return false
	 		};
	 		if($_code==""||($_code=="请输入验证码")){
	 			waitClose();
	 			alert("请输入正确的验证码")
	 			return false
	 		};
	 		var _url=url;
	 		var _otherInfoSubmit=otherInfoSubmit?otherInfoSubmit : "";
	 		$.ajax({
	 			type:"post",
	 			url:_url,
	 			//data:"phone="+$_phoneno+"&code="+$_code+"&"+_otherInfoSubmit,
	 			data:"phone="+$_phoneno+"&code="+$_code,
	 			success:function(result){
	 				waitClose();
	 				$("#commomLogin_phoneNum").val("");
	 			  	$("#commomLogin_codeNum").val("")
	 				if (result.result == "succ") {
		    			succFun();
		    			getedHandle();
		    		}else if(result.result == "fail"){
		    			if(result.message=="received"){
		    				receivedFun();
		    				getedHandle();
		    			}else{
		    				alert(result.message);
		    				waitClose();
		    				getedHandle();
		    			}
		    		}
	 			},error:function(){
		        	alert("发送请求失败");
		        	waitClose();
		        	getedHandle();
	 			}
	 		});
		}
		function getedHandle(){
			clearInterval(time1);
			$("#commomLogin_getcode").removeAttr("noclick").css('background','#a7e3ff');
			$("#commomLogin_loginwarn").html("为保证您能成功领取奖品，请如实填写");
			$(".commomLogin_getcode").show();
			$(".commomLogin_getcodeagain").hide();
			$(".commomLogin_getcodeagain var").html('60');
		};
		
		
		
	})
		
		
		
	

	</script>
</html>
