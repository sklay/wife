<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="src/vue.js"></script>
	</head>
	<body>
		<script>
			/*
			 es6  let
			 不能重复声明变量
			 没有声明的 变量  不能使用
			 
			 作用域 在块级中 (函数中 )
			 * */
//			for(var i = 1;i<3; i++){
//				document.addEventListener('click',function(){
//					alert(i);  // 点击屏幕 只会出现一次 结果  3   var声明的  是全局的，  for 不是块级作用域
//				})
//			}

			for(var i =1;i<3;i++){
//				function fn(){
//					document.addEventListener('click',function(){
//						alert(i);
//					})
//				}
//				fn();  //弹出两次  3
				
				var nAdd=function(){//nAdd 的值 对应的是一个匿名函数
					document.addEventListener('click',function(){
						alert(i);
					})// ----》此时是一个闭包函数 ，要依赖父级函数  nAdd
				}
				nAdd();//两次  点击体中的  函数  中的 i 要依赖父级函数  中的 i 条件不满足 不会退出   所以 会弹出两次
				
				/*
				 使用闭包函数 要注意 
				 
				 如果子函数  依赖父级 函数， 那么 父级函数 就会一直在内存中 ，不会被垃圾回收机制回收，会很消耗内存
				 
				 ，所以退出之前要清除
				 
				 
				 使用闭包的注意点
					1）由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，
						否则会造成网页的性能问题，在IE中可能导致内存泄露。解决方法是，在退出函数之前，
						将不使用的局部变量全部删除。
					2）闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把父函数当作对象（object）使用，
						把闭包当作它的公用方法（Public Method），把内部变量当作它的私有属性（private value），
						这时一定要小心，不要随便改变父函数内部变量的值。
				 * */
			}
//			nAdd();  //一次

//			for(let i = 1;i<3;i++){
//				document.addEventListener('click',function(){
//					alert(i);  //结果 是两次  1   ，2  每次进来都是新的 
//				})
//			}
			
			
		</script>
		
	</body>
</html>
