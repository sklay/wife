<!--<%@ page contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>-->
<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>【药快到】食品卫生找茬大赛</title>
		<meta name="description" content="食品卫生，你注意过吗？快来看看自己能到哪关！" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
		<meta name="format-detection" content="telephone=no" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<link rel="stylesheet" type="text/css" href="style/act_foodSafety_style.css" />
		<link rel="stylesheet" type="text/css" href="style/act_15foodSafety_index.css" />
		<link rel="stylesheet" type="text/css" href="style/act_common_loginStyle.css" />
		<script src="js/jquery-2.2.0.min.js" type="text/javascript"></script>
		<script src="js/common.js" type="text/javascript" charset="utf-8"></script>
		<script>
			var _hmt = _hmt || [];
			(function() {
				var hm = document.createElement("script");
				hm.src = "//hm.baidu.com/hm.js?ad944074f96dc318a2bb2265b8eb4c31";
				var s = document.getElementsByTagName("script")[0];
				s.parentNode.insertBefore(hm, s);
			})();
		</script>
		<script>
			(function(doc, win) {
				var docEl = doc.documentElement,
					resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
					recalc = function() {
						var clientWidth = docEl.clientWidth;
						if(clientWidth >= 640) {
							clientWidth = 640;
						};
						if(!clientWidth) return;
						docEl.style.fontSize = 100 * (clientWidth / 640) + 'px';
					};
				if(!doc.addEventListener) return;
				win.addEventListener(resizeEvt, recalc, false);
				doc.addEventListener('DOMContentLoaded', recalc, false);
			})(document, window);
		</script>
	</head>

	<body>
		<div class="wrap">
			<script>
				var wh = $(window).height();
				var ww = $(window).width();
				$(".wrap").width(ww);
				$(".wrap").css({
					minHeight: wh
				});
			</script>
			<div class="loading_wrap" id="loading_wrap">
				<script>
					(function() {
						var wh = $(document).height();
						var ww = $(window).width();
						$("#loading_wrap").css({
							minHeight: wh
						});
						$("#loading_wrap").width(ww);
					})();
				</script>
				<div class="loadingCon_wrap">
					<div class="loadingPage_wrap">
						<img src="images/act_game_load_cucumber.png" alt="" />
						<img src="images/act_game_load_tomato.png" alt="" />
						<img src="images/act_game_load_carrot.png" alt="" />
						<img src="images/act_game_load_eggplant.png" alt="" />
					</div>
					<div style="width:100%;">
						<img class="loading_text" src="images/act_game_loadingtext.png" alt="" />
					</div>
					<div style="width:100%;">
						<div class="loading_line_wrap">
							<img class="loading_lineback" src="images/act_game_loadingline_back.png" alt="" />
							<img class="loading_line loadingLineAni" src="images/act_game_loadingline.png" alt="" />
						</div>
					</div>
				</div>
			</div>
			<script>
				(function() {
					var loadingAniTime = null;
					var loadingAniNum = 0;
					loadingAniTime = setInterval(function() {
						$(".loadingPage_wrap img").removeClass("moveImg");
						$(".loadingPage_wrap img").eq(loadingAniNum).addClass("moveImg");
						loadingAniNum++;
						var loadingImgLen = $(".loadingPage_wrap img").length;
						if(loadingAniNum >= loadingImgLen) {
							loadingAniNum = 0;
						}
					}, 500);
					/* document.querySelector(".loading_line").onload=function(){
						$(".loading_line").addClass("loadingLineAni");	
					} */
				})();
			</script>
			<div class="index controlAlertPage" id="index" style="display:none">
				<div class="index_top">
					<img src="images/act_game_load_title.png" alt="" />
					<img src="images/act_game_load_title_1.png" alt="" />
				</div>
				<div class="index_body">
					<img src="images/act_game_index_eye.png" alt="">
					<div class="leftEye">
						<img class="eyeBlackWrap" src="images/act_game_index_eyeBlack_wrap.png" alt="">
						<img class="eyeWhite" src="images/act_game_index_eye_ball.png" alt="" />
					</div>
					<div class="rightEye">
						<img class="eyeBlackWrap" src="images/act_game_index_eyeBlack_wrap.png" alt="">
						<img class="eyeWhite" src="images/act_game_index_eye_ball.png" alt="" />
					</div>
				</div>
				<div class="index_bottom" id="index_bottom">
					<img id="start" src="images/act_game_index_start.png" alt="">
					<img src="images/act_game_index_title.png" alt="" />
					<p id="activeRule_key">活动规则</p>

				</div>
				<div class="index_activeRule">
					<p>活动规则：</p>
					<p>1、用户根据提示，点击画面中与其他图片不同的图片，点击正确计一分，进入下题。答题时间60秒，共20道题。</p>
					<p>2、凡参与活动的用户均可获得【药快到】满48元减10元现金券2张。</p>
					<p>3、活动有效期自10月30日0:00——11月8日23:59。</p>
					<p>4、本活动最终解释权归北京康顾多健康科技有限公司所有。</p>
				</div>
			</div>

			<div class="start_game common_wrapSty" id="start_game">
				<div class="start_top" id="start_top">
					<div class="scoreCount">得分：<span id="scoreCountShow">0</span></div>
					<div class="timeClock">
						<p id="gameTimeShow">60</p>
					</div>
					<button id="stop_btn">暂停</button>
				</div>
				<div class="food_img controlAlertPage" id="food_img">
					<p id="question-info"></p>
					<div class="cavwrap"></div>
				</div>

			</div>

			<div class="pause_page common_wrapSty controlAlertPage">
				<p>游戏暂停</p>
				<button id="continue">继续游戏</button>
			</div>

			<div class="time_over common_wrapSty controlAlertPage">
				<div class="time_over_box common_boxSty">
					<span class="closeShade">X</span>
					<div class="time_over_title common_titleSty">
						<img src="images/act_game_load_carrot.png" alt="" />
						<p>时间到</p>
					</div>
					<div class="time_over_desc common_descSty">
						<p style="font-size: 18px;text-align: center;padding: 1rem;padding-bottom:0;font-weight: 600;">你一共找到了<span id="finalScoreNum" style="color: #da380d">6</span>种<br/>有问题的食品，</p>
						<p id="scoreLevelText" style="font-size: 18px;text-align: center;font-weight: 600;">以后吃东西不怕中毒了哦~</p>
						<p style="font-size: 20px;text-align: center;margin-top:.6rem;font-weight: 600;color: #da380d;">快邀请小伙伴们<br/>也来试试吧！</p>
					</div>
				</div>
				<div class="time_over_btnimg common_btnImg">
					<img class="shareFri" src="images/act_game_invite_sbtn.png" alt="" />
					<img class="getAward" src="images/act_game_receive_btn.png" alt="" />
				</div>
			</div>

			<div class="question_end common_wrapSty controlAlertPage">
				<div class="question_end_box common_boxSty">
					<span class="closeShade">X</span>
					<div class="question_end_title common_titleSty">
						<img src="images/act_game_load_carrot.png" alt="" />
						<p>天啦撸！</p>
					</div>
					<div class="question_end_desc common_descSty">
						<p style="font-size: 18px;text-align: center;padding: 1rem;padding-bottom:0;font-weight: 600;">你一共找到<span style="color: #da380d">20</span>种<br/>有问题的食品，<br/>简直是火眼金睛！</p>
						<p style="font-size: 20px;text-align: center;margin-top:.6rem;font-weight: 600;color: #da380d;">快跟小伙伴们<br/>炫耀一下吧！</p>
					</div>
				</div>
				<div class="question_end_btnimg common_btnImg">
					<img class="shareFri" src="images/act_game_invite_sbtn.png" alt="" />
					<img class="getAward" src="images/act_game_receive_btn.png" alt="" />
				</div>
			</div>
			<div class="receive_success common_wrapSty controlAlertPage">
				<div class="receive_success_box common_boxSty">
					<span class="closeShade">X</span>
					<div class="receive_success_title common_titleSty">
						<img src="images/act_game_load_carrot.png" alt="" />
						<p>恭喜您！</p>
					</div>
					<div class="receive_success_desc common_descSty">
						<p class="commom_desc_psty1">领取成功!</p>
						<p class="commom_desc_psty2">为了健康，快去使用吧！</p>
					</div>
				</div>
				<div class="receive_success_btnimg common_btnImg">
					<a id="downloadA" href="http://store.ykd365.com/download.html"><img src="images/act_game_use_btn.png" alt="" /></a>
				</div>
			</div>

			<div class="have_received common_wrapSty controlAlertPage">
				<div class="have_received_box common_boxSty">
					<span class="closeShade">X</span>
					<div class="have_received_title common_titleSty">
						<img src="images/act_game_load_carrot.png" alt="" />
						<p>Sorry！</p>
					</div>
					<div class="have_received_desc common_descSty">
						<p class="commom_desc_psty1" style="font-size:.4rem;padding-top: 1.5rem">您已经领过券了！</p>
						<p class="commom_desc_psty2" style="margin-top: .7rem; line-height:.7rem;">快邀请小伙伴们<br/>一起涨姿势吧！</p>
					</div>
				</div>
				<div class="have_received_btnimg common_btnImg">
					<img style="width:100%;" class="shareFri" src="images/act_game_invite_btn.png" alt="" />
				</div>
			</div>

			<div class="receive_page common_wrapSty controlAlertPage" id="receive_page">
				<div class="receive_page_title" id="receive_page_title">
					<p>领取【药快到】现金券<br/>为健康助力!</p>
					<img style="top:17%;" src="images/act_game_coupon.png" alt="" />
				</div>
				<div class="loginnow" id="loginnow">
					<!--<%@ include  file="act_common_loginPage.jsp"%>-->
					<div class="commomLogin">
						<input type="text" placeholder="输入手机号" id="commomLogin_phoneNum" />
						<p id="commomLogin_loginwarn" style="text-align:center;font-size:12px;padding-left:5px;line-height:20px;">为保证您能成功领取奖品，请如实填写</p>
						<div style="width:100%;overflow:hidden;margin-top:.1rem;">
							<input type="text" placeholder="输入验证码" id="commomLogin_codeNum" />
							<div id="commomLogin_getcode">
								<span class="commomLogin_getcode">获取验证码</span>
								<span class="commomLogin_getcodeagain"><var style="color:#ff0000">60</var>秒后<br/>重新获取</span>
							</div>
						</div>
						<div id="loginsumbit">完成</div>
					</div>
				</div>
			</div>
			<div id="shareAppPage" class="common_wrapSty">
				<button class="shareAppBtn" id="shareAppPage_shareFir" onclick="s(0)">分享给好友</button>
				<button class="shareAppBtn" id="shareAppPage_friRound" onclick="s(1)">分享到朋友圈</button>
			</div>
		</div>
		<!--<%@ include  file="act_common_sharePage.jsp"%>-->
		<script>
			(function() {
				var wh = $(window).innerHeight();
				if(wh <= 500) {
					$("#index").css({
						paddingTop: ".3rem"
					});
					$("#index_bottom").css({
						marginTop: ".4rem"
					});
					$(".index_bottom p").css({
						position: "static",
						marginTop: ".5rem",
						marginBottom: ".2rem"
					});
					$("#start_top").css({
						marginTop: ".1rem"
					});
					$("#food_img").css({
						marginTop: ".9rem"
					});
					$("#loginnow").css({
						marginTop: ".25rem"
					});
					$("#loginsumbit").css({
						marginTop: ".25rem"
					});
					$("#receive_page_title").css({
						paddingTop: ".3rem"
					});
					$(".common_boxSty").css({
						marginTop: "2.2rem"
					});
					$(".common_btnImg").css({
						top: "7.2rem"
					});
				}
			})();
		</script>
	</body>

	<script type="text/javascript">
		var scoreNum = 0; //得分记录；
		var haveScore = false;
		//	预加载图片
		var images = new Array();
		var path = "images/";
		var normalImgPrefix = "act_game_";
		var badImgPrefix = "act_game_bad_";
		var imgSuffix = ".png";

		var preLoadImgList = ["act_game_22", "act_game_bad_22", "act_game_33", "act_game_bad_33", "act_game_44", "act_game_bad_44", "act_game_55", "act_game_bad_55", "act_game_66", "act_game_bad_66", "act_game_77_1", "act_game_bad_77_1", "act_game_77_2", "act_game_bad_77_2", "act_game_77_3", "act_game_bad_77_3", "act_game_77_4", "act_game_bad_77_4", "act_game_77_5", "act_game_bad_77_5",
			"act_game_77_6", "act_game_bad_77_6", "act_game_77_7", "act_game_bad_77_7", "act_game_77_8", "act_game_bad_77_8", "act_game_77_9", "act_game_bad_77_9", "act_game_77_10", "act_game_bad_77_10", "act_game_77_11", "act_game_bad_77_11", "act_game_77_12", "act_game_bad_77_12", "act_game_77_13", "act_game_bad_77_13", "act_game_77_14", "act_game_bad_77_14", "act_game_77_15", "act_game_bad_77_15", "act_game_clock", "act_game_coupon",
			"act_game_coupon_shine", "act_game_index_desc", "act_game_index_eye", "act_game_index_shine", "act_game_index_title", "act_game_index_start", "act_game_load_title", "act_game_load_title_1", "act_game_receive_btn", "act_game_use_btn", "act_game_index_start", "act_game_index_title", "act_game_invite_btn", "act_game_invite_sbtn"
		];
		var loadingTime = 0;
		var loadingTimer = null;
		var perLoadBoo = false;
		loadingTimer = setInterval(function() {
			loadingTime++;
		}, 1000);

		function addELoad() {
			//images[preLoadImgList.length-1].onload=function(){
			if(loadingTime <= 2) {
				clearInterval(loadingTimer);
				setTimeout(function() {
					$("#loading_wrap").remove();
					$("#index").show();
					loadingTime = null;
				}, 2000);
			} else {
				clearInterval(loadingTimer);
				$("#loading_wrap").remove();
				loadingTime = null;
				$("#index").show();
			};
			//}
		};
		(function preload() {
			for(var i = 0; i < preLoadImgList.length; i++) {
				images[i] = new Image();
				images[i].src = path + preLoadImgList[i] + imgSuffix;
				perLoadBoo = true;
			};
		})();
		//	活动过期后，领取奖励按钮取消；
		var state = "${state }";
		(function() {
			if(!state) {
				$(".time_over .common_btnImg").empty();
				$(".question_end .common_btnImg").empty();
				var _html = ' <img style="width:100%;" class="shareFri" src="images/act_game_invite_btn.png" alt=""/>';
				$(".time_over .common_btnImg").append(_html);
				$(".question_end .common_btnImg").append(_html);
			}
		})();
		var wechatObj = new Object();
		wechatObj.title = '【药快到】食品卫生找茬大赛';
		wechatObj.desc = "食品卫生，你注意过吗？快来看看自己能到哪关！";
		wechatObj.link = 'http://store.ykd365.com/medhtml/common/startFSGame';
		wechatObj.imgUrl = 'http://imgstore.camore.cn/icon/logo/act_foodSagety_weixinShare.jpg';

		function getMenuShare() {
			var wechatShareMenu = {
				title: '【药快到】食品卫生找茬大赛', // 分享标题
				desc: wechatObj.desc, // 分享描述
				link: 'http://store.ykd365.com/medhtml/common/startFSGame',
				imgUrl: 'http://imgstore.camore.cn/icon/logo/act_foodSagety_weixinShare.jpg', // 分享图标
				success: function() {},
				cancel: function() {}
			};
			var wechatShareMenu2 = { //朋友圈分享用
				title: wechatObj.desc, // 分享标题
				link: 'http://store.ykd365.com/medhtml/common/startFSGame',
				imgUrl: 'http://imgstore.camore.cn/icon/logo/act_foodSagety_weixinShare.jpg', // 分享图标
				success: function() {},
				cancel: function() {}
			};
			wx.onMenuShareTimeline(wechatShareMenu2);
			wx.onMenuShareAppMessage(wechatShareMenu);
			wx.onMenuShareQQ(wechatShareMenu);
			wx.onMenuShareWeibo(wechatShareMenu);
		};

		function s(type) {
			var jsonObject = {};
			if(type == 0) {
				jsonObject.shared_type = "0";
				jsonObject.shared_url = wechatObj.link;
				jsonObject.shared_title = wechatObj.title;
				jsonObject.shared_content = wechatObj.desc;
				jsonObject.shared_img_url = wechatObj.imgUrl;
			} else
			if(type == 1) {
				jsonObject.shared_type = "1";
				jsonObject.shared_url = wechatObj.link;
				jsonObject.shared_title = wechatObj.title;
				jsonObject.shared_content = wechatObj.desc;
				jsonObject.shared_img_url = wechatObj.imgUrl;
				/* var jsonObject={"shared_type":"1", "shared_url":"http://test.ykd365.com:10080/weixin/wechat/redenvshare?pharmacyId=200&userId=%s&type=1&actId=4&inviteType=hongbao", 
					"shared_title":"【药快到】朋友圈新用户送100元红包", "shared_content":"朋友圈买药神器,药快到感觉超赞,你也来试试,首次体验送您100元红包，快来抢啊！！！", 
						"shared_img_url":"http://imgstore.camore.cn/icon/home/ic_splash_yao_0526.png"}; */

			}
			var jsonStr = JSON.stringify(jsonObject);
			sharedTypeByJson(jsonStr);
		}

		function sharedTypeByJson(jsonStr) { //ios会覆盖此方法
			camore.sharedTypeByJson(jsonStr); //android会调用里面的方法
		}
	</script>
	<script src="js/act_foodSafety_controlJs.js" type="text/javascript" charset="utf-8"></script>
	<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js" type="text/javascript"></script>
	<script type="text/javascript">
		//分享链接
		window.onload = function() {
			var preLoadTime = null;
			preLoadTime = setInterval(function() {
				if(perLoadBoo) {
					clearInterval(preLoadTime);
					addELoad();
					perLoadBoo = null;
				}
			}, 1000);

			$(".leftEye").addClass("eyeBlackWrapAni");
			$(".rightEye").addClass("eyeBlackWrapAni");
			$(".eyeWhite").addClass("eyeWhiteAni");
			$("#receive_page").on("click", "#commomLogin_getcode", function() {
				getCodeCommon("comValCodeAjax");
			});
			$("#receive_page").on("click", "#loginsumbit", function() {
				submitPhoneCodeCommon("receiveFSReward", function() {
					$(".controlAlertPage").hide();
					$(".receive_success").show();
				}, function() {
					$(".controlAlertPage").hide();
					$(".have_received").show();
				});
			});
		};
	</script>

</html>