<!--<%@ page contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>-->
<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="format-detection" content="telephone=no, email=no" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="description" content=" ">
		<title>母亲节</title>
		<!--引入外部js资源-->
		<!--==============依赖的jquery库=============================-->
		<script src="js/jquery-2.2.0.min.js"></script>
		<!--==============自定义的公用的js文件=============================-->
		<script type="text/javascript" src="js/html_common.js"></script>
		<script type="text/javascript" src="js/act_16motherDay_index.js"></script>
		<script type="text/javascript" src="js/act_16motherDay_animation.js"></script>
		<script src="js/zepto.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/touch.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/preloadjs-0.6.0.min.js"></script>
		<script src="js/createjs-2014.12.12.min.js"></script>
		<!--==============自定义css文件=============================-->
		<link rel="stylesheet" href="style/act_16motherDay_index.css" />
		<link rel="stylesheet" href="style/act_motherDay_animation.css" />
		<style>
			/*初始化css样式==========全局样式*/
			
			* {
				margin: 0;
				padding: 0;
			}
			
			html {
				font-size: 62.5%;
			}
			
			html,
			body,
			.con_wrap,
			.content,
			.index_content,
			.game_show_moduel_one,
			.game_show_moduel_two,
			.game_show_moduel_three,
			.game_show_moduel_fore,
			.game_show_moduel_five,
			.game_show_moduel_six,
			.first_test,
			.game_show_moduel_seven {
				width: 100%;
				height: 100%;
				overflow: hidden;
			}
			/*.content{
				background: rgb(255, 177, 177);
			}*/
			
			body {
				font-size: 10px;
				font-size: .1rem;
				font-family: Microsoft Yahei, Arial;
				width: 100%;
			}
			/*适配小屏手机*/
			
			@media screen and (max-height: 580px) {
				.con_wrap_index_desc {
					margin: .4rem auto;
				}
				.moduel_five_people {
					width: 4rem;
				}
			}
			
			@media screen and (max-height: 480px) {
				.wrap_index_title_wrap {
					width: 5rem;
				}
				.wrap_index_title_wrap img:nth-child(2) {
					width: .5rem;
					top: 3rem;
				}
				.con_wrap_index_desc {
					width: 5rem;
				}
				.con_wrap_index_desc {
					margin: 0rem auto .2rem;
				}
				.con_wrap_index_people {
					width: 3.6rem;
				}
				.moduel_one_people {
					width: 4rem;
					padding: .4rem 1rem 0;
				}
				.moduel_one_people img:nth-child(2) {
					width: 1.7rem;
				}
				.moduel_two_desc {
					width: 3.6rem;
				}
				.moduel_two_people {
					width: 3rem;
				}
				.moduel_three_desc {
					margin: .7rem auto;
				}
				.moduel_two_desc img:nth-child(2) {
					margin-left: -.9rem;
				}
				.moduel_fore_people {
					width: 4rem;
				}
				.moduel_five_people {
					width: 3.4rem;
					margin: 0.3rem auto 0;
				}
				.moduel_five_people img:nth-child(1) {
					width: 2.8rem;
					margin-left: -.8rem;
				}
				.moduel_fore_desc {
					padding: 0 1rem;
				}
				.moduel_seven_content {
					padding-top: .2rem;
					position: relative;
				}
				.moduel_seven_title_wrap img:nth-child(2) {
					top: 0.7rem;
				}
				.moduel_seven_desc {
					margin: 0rem auto;
				}
				.moduel_seven_title_wrap {
					margin: 0 auto 0.1rem;
				}
				.moduel_seven_desc img:nth-child(2) {
					width: 3.8rem;
				}
				.moduel_seven_desc img:nth-child(3) {
					width: 3.4rem;
					top: 1.15rem;
				}
				.moduel_six_content {
					padding: .4rem 0;
				}
				.moduel_six_bottom {
					width: 2.4rem;
				}
				.moduel_six_desc {
					margin-top: .6rem;
				}
			}
			/*适配小屏手机    end*/
			
			.hide {
				display: none;
			}
			
			.show {
				display: block;
			}
			
			.page-current {
				display: block;
			}
		</style>
		<!--百度统计-->
		<script>
			var _hmt = _hmt || [];
			(function() {
				var hm = document.createElement("script");
				hm.src = "//hm.baidu.com/hm.js?ad944074f96dc318a2bb2265b8eb4c31";
				var s = document.getElementsByTagName("script")[0];
				s.parentNode.insertBefore(hm, s);
			})();
		</script>
	</head>

	<body>
		<div class="con_wrap">
			<!--加载页start-->
			<div id="loadingPage">
				<div class="loadingImg">
					<img src="images/loading01.png" />
					<img src="images/loading02.png" />
					<img src="images/loading03.png" />
				</div>
				<p class="loadText">已加载<span id="loadPer"></span></p>
				<div class="loadShape"><span id="loadShapePro"></span></div>
				<script>
					(function() {
						var wh = $(window).height();
						$("#loadingPage").css({
							"minHeight": wh
						});
					})();
				</script>
			</div>

			<!--加载页 end-->
			<!--首页 start-->
			<div class="content">
				<div class="music_wrap">
					<img class="music_play" src="images/act_16motherDay_musciOpen.png" alt="">
					<img class="music_close" src="images/act_16motherDay_musciClose.png" alt="">
				</div>

				<div class="index_content common_wrap">
					<div class="wrap_index_title_wrap">
						<img class="flowerTit" src="images/act_16motherDay_title.png" />
						<img src="images/act_16motherDay_heard.png" />
					</div>
					<div class="con_wrap_index_desc">
						<!--<p>药快到感恩母亲节健康有礼</p>-->
						<img src="images/act_16motherDay_desc.png" />
					</div>
					<div class="con_wrap_index_people">
						<img src="images/act_16motherDay_parenting.png" />
					</div>
					<div class="con_wrap_index_botom">
						<img src="images/act_16motherDay_flower.png" />
					</div>
					<div class="index_slide_up">
						<img src="images/act_16motherDay_pointerUp.png" />
					</div>
				</div>
				 
				<!--<div class="slide_up">
						<span>>></span>
					</div>-->
				<!--</div>-->
				<!--首页 end-->
				<!--展示页-->

				<!--<div class="controllerPage game_show">-->
				<!--第一个模块 start-->
				<div class="game_show_moduel_one common_wrap">
					<div class="moduel_one_content">
						<div class="moduel_one_title_wrap">
							<img src="images/act_16motherDay_view_title1.png" />
							<img src="images/act_16motherDay_view_title2.png" />
						</div>
						<!--<div class="moduel_one_desc">
							<img src="images/act_16motherDay_desc.png" />
						</div>-->
						<div class="moduel_one_people">
							<img src="images/act_16motherDay_view1_desc.png" />
							<img src="images/act_16motherDay_view_moher.png" />
						</div>

					</div>
					<!--<div class="slide_up slide_up_comm">
							<span>>></span>
						</div>-->
				</div>
				<!--第一个模块 end-->
				<!--第二个模块 start-->
				<div class="game_show_moduel_two common_wrap">
					<div class="moduel_two_content">
						<div class="moduel_two_title_wrap">
							<img src="images/act_16motherDay_view2_title1.png" />
							<img src="images/act_16motherDay_view2_title2.png" />
						</div>
						<div class="moduel_two_desc">
							<img src="images/act_16motherDay_view2_desc.png" />
							<img src="images/act_16motherDay_view2_daut.png" />
						</div>
						<div class="moduel_two_people">
							<img src="images/act_16motherDay_view2_mother.png" />
						</div>
					</div>
					<!--<div class="slide_up slide_up_comm">
							<span>>></span>
						</div>-->
				</div>
				<!--第二个模块 end-->
				<!--第三个模块 start-->
				<div class="game_show_moduel_three common_wrap">
					<div class="moduel_three_content">
						<div class="moduel_three_title_wrap">
							<img src="images/act_16motherDay_view3_title1.png" />
							<img src="images/act_16motherDay_view3_title2.png" />
						</div>
						<div class="moduel_three_desc">
							<img src="images/act_16motherDay_view3_desc.png" />
							<img src="images/act_16motherDay_view3_ma.png" />
						</div>
					</div>
					<!--<div class="slide_up slide_up_comm">
							<span>>></span>
						</div>-->
				</div>
				<!--第三个模块 end-->
				<!--第四个模块 start-->
				<div class="game_show_moduel_fore common_wrap">
					<div class="moduel_fore_content">
						<div class="moduel_fore_title_wrap">
							<img src="images/act_16motherDay_view4_title.png" />
						</div>
						<div class="moduel_fore_desc">
							<img src="images/act_16motherDay_view4_desc1.png" />
							<img src="images/act_16motherDay_view4_desc2.png" />
						</div>
						<div class="moduel_fore_people">
							<img src="images/act_16motherDay_view4_eat.png" />
						</div>
					</div>
					<!--<div class="slide_up slide_up_comm">
							<span>>></span>
						</div>-->
				</div>
				<!--第四个模块 end-->
				<!--第五个模块 start-->
				<div class="game_show_moduel_five common_wrap">
					<div class="moduel_five_content">
						<div class="moduel_five_title_wrap">
							<img src="images/act_16motherDay_view5_title.png" />
						</div>
						<!--<div class="moduel_five_desc">
							<img src="images/act_16motherDay_view5_desc.png" />
						</div>-->
						<div class="moduel_five_people">
							<img src="images/act_16motherDay_view5_desc.png" />
							<img src="images/act_16motherDay_view5_old.png" />
						</div>
					</div>
					<!--<div class="slide_up slide_up_comm">
							<span>>></span>
						</div>-->
				</div>
				<!--第五个模块 end-->
				<!--第六个模块 start-->
				<div class="game_show_moduel_six common_wrap">
					<div class="moduel_six_content">
						<div class="moduel_six_title_wrap">
							<img src="images/act_16motherDay_view6_desc1.png" />
							<!--<img data-lazy="src!images/act_16motherDay_view6_desc2.png" />-->
							<img src="images/act_16motherDay_view6_desc2.png" />
						</div>
						<div class="moduel_six_dot">
							<p>••••••••</p>
						</div>
						<div class="moduel_six_desc">
							<img src="images/act_16motherDay_view6_desc3.png" />
							<img src="images/act_16motherDay_view6_desc4.png" />
						</div>
					</div>
					<div class="con_wrap_index_botom moduel_six_bottom">
						<img src="images/act_16motherDay_flower.png" />
					</div>
					<!--<div class="slide_up slide_up_comm">
							<span>>></span>
						</div>-->
				</div>
				<!--第六个模块 end-->
				<!--第七个模块 start-->
				<div class="game_show_moduel_seven common_wrap">
					<div class="moduel_seven_content">
						<div class="moduel_seven_title_wrap">
							<img src="images/act_16motherDay_view7_title.png" />
							<img src="images/loading.gif" />
						</div>
						<div class="moduel_seven_word">
							<p>正品保证</p>
						</div>
						<div class="moduel_seven_desc">
							<img class="sendP" src="images/act_16motherDay_view7_sendp.png" />
							<div class="moduel_seven_desc_left">
								<img src="images/act_16motherDay_view7_desc.png" />
								<img src="images/act_16motherDay_view7_cust.png" />
							</div>
						</div>
						<div class="moduel_seven__botom">
							<img src="images/act_16motherDay_view7_bloud.png" />
						</div>
					</div>
					<div class="clickBtn_wrap">
						<span id="backChange" class="goForUse">下载药快到APP</span>
						<span id="saveAndShare">领取现金券</span>
					</div>

				</div>
				<!--第七个模块 end-->

				<!--</div>-->
			</div>
			<div class="slide_up">
				<img src="images/act_16motherDay_up.png" />
			</div>
		</div>

		<!--控制音乐循环播放的 问题-->
		<script type="text/javascript">
			var onEnded = function() {
				document.getElementById("audioCon").play();
			};
		</script>
		<!--<audio id="audioCon" src="images/act_16motherDay_love.mp3" controls="controls" sortNum="0" loop="loop" preload="auto" onended="onEnded()"></audio>-->
		<audio src="images/act_16motherDay_love.mp3" id="audioCon" controls="controls" style="display: block;" onended="onEnded()"></audio>
	</body>
	<script>
		function getUrlEle() {
			if (location.href.indexOf("?") < 0 || location.href.indexOf("&") < 0) {
				return "";
			}
			var urldec = location.href.split("?")[1].split("&");
			var urlQuery = {};
			var a, b;
			for (var i = 0, j = urldec.length; i < j; i++) {
				a = urldec[i].split("=")[0];
				b = urldec[i].split("=")[1];
				console.log(a.split("%EF%BC%9D"))
				if (b == undefined) {
					a = urldec[i].split("=")[0].split("%EF%BC%9D")[0];
					b = urldec[i].split("=")[0].split("%EF%BC%9D")[1];
				};
				urlQuery[a] = b;
			};
			return urlQuery;
		};
		var version = getUrlEle().version_code || '';
		var token = getUrlEle().user_token || '';
		var manifest = [];
		var preload;
		/* window加载 */
		var canvas = document.getElementById("myCanvas");
		var stage = new createjs.Stage(canvas);
		var manifest = [];
		var preload;
		//定义相关JSON格式文件列表
		function setupManifest() {
			var imgL = $("img").length;
			for (var i = 1; i < imgL; i++)
				manifest.push({
					src: $("img").eq(i).attr("src")
				});
			var audioL = $("audio").length;
			for (var i = 1; i < audioL; i++)
				manifest.push({
					src: $("audio").eq(i).attr("src")
				});
		};
		//开始预加载
		function startPreload() {
			preload = new createjs.LoadQueue(true);
			//注意加载音频文件需要调用如下代码行
			preload.installPlugin(createjs.Sound);
			//preload.on("fileload", handleFileLoad);
			preload.on("progress", handleFileProgress);
			preload.on("complete", loadComplete);
			preload.loadManifest(manifest);
		}
		//加载中动画
		var load = {};
		load.loadAniBoo = true;
		load.loadNum = 0;
		load.loadMax = $("img").length + $("audio").length;
		load.loadAniTime = null;
		//	var loadPer = $("#loadPer"); //加载进度条
		function handleFileProgress(event) {
			if (load.loadAniBoo) {
				load.loadAniTime = setInterval(function() {
					/**逻辑上的加载完成 -1是为了避免两次100% 最后的100%应该由物理的加载完成来实现*/
					if (load.loadNum >= (load.loadMax - 1)) {
						if (load && load.loadAniTime) {
							clearInterval(load.loadAniTime);
						}
						return true;
					}
					load.loadNum++;
					loadState(load);
				}, 500)
				load.loadAniBoo = false;
			} else {
				return false;
			}
		}

		function loadState(load) {
			var loadPer = $("#loadPer"); //加载进度条
			var percLoad = Math.ceil(load.loadNum / load.loadMax * 100) + "%"; //100%的样式
			console.log(load.loadNum, '/', load.loadMax, '  =  ', percLoad); //14
			loadPer.html(percLoad);
			$("#loadShapePro").css({
				"width": percLoad
			})
			$("#loadShapePro").animate({
				width: percLoad
			});
		}
		//全部资源加载完毕
		/**物理的加载完成 最后的100%应该由本方法实现 （防止由于网络过慢导致上面的逻辑加载先完成，所以最后一个100%由这边控制）*/
		function loadComplete(event) {
			if (load && load.loadAniTime)
				clearInterval(load.loadAniTime);
			load.loadNum = load.loadMax;
			loadState(load);
			setTimeout(function() {
				$('#loadingPage').fadeOut(400, function() {
					$('#loadingPage').hide();
				});
				/**初始都隐藏**/
				$('.content .common_wrap').find("div").addClass("hide");
				$('.content .common_wrap').find("img").addClass("hide");
				//	activity.showPage(".con_wrap_index");
				$(".index_content").find("div").removeClass('hide').addClass("show");
				$(".index_content").find("img").removeClass('hide').addClass("show");
//				$(".index_content").fadeIn();
				$('.index_content').addClass('page-current');
				winOnLoad();
			}, 500);
		};
		
		setupManifest();
		startPreload();
		

		function winOnLoad() {
			//去使用跳转页面
			$(".goForUse").on("click", function() {
				goPage();
			});
			/**判断跳转的地址**/
			function goPage() {
				var target_href = 'http://a.app.qq.com/o/simple.jsp?pkgname=com.camore.yaodian.activity&g_f=991653';
				/**判断是否是微信**/
				if (is_weixin()) {
					window.location.href = target_href;
				} else {
					var version = parseInt('${version}');
					if (version && 200 <= version) {
						gotoPage('{"type":"1"}'); //跳转到腾讯下载
					} else {
						window.location.href = target_href;
					};
				}
			}
			
			//    alert('token is ' + token + "  , version is  " + version) ;
			$("#saveAndShare").on("click", function() {
				//				location.href = "http://" + location.host + "/medhtml/common/act_comSkip_page?method=act_16motherDay_gethb&user_token=" + token + "&version_code=" + version&codeActId=160;
				//				location.href="http://192.168.1.193:8080/medstore-html/common/act_comSkip_page?method=act_16motherDay_gethb&user_token="+token+"&version_code="+version&codeActId=160;
			});
		}
		
	</script>

</html>