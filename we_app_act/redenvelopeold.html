<!--<%@ page contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>-->

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
<meta name="format-detection" content="telephone=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="description" content="【邀请有奖】邀请新伙伴，你得30元，TA得60元，限时活动，先到先得！"/>
<title>【药快到】新用户送30元</title>
	<link rel="stylesheet" href="style/main_wechat.css" />
	<script src="js/jquery-1.9.0.min.js"></script>
	<script src="js/common.js"></script>
	<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<style>
html, body, div, span, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, address, big, cite, code, del, em, font, img, ins, small, strong, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend,input{margin: 0;padding: 0;}
body{width:100%;background:#000000;font-family:"\5FAE\8F6F\96C5\9ED1", "Microsoft Yahei", "Hiragino Sans GB", tahoma, arial, "\5B8B\4F53";font-size:12px;color:#000000;OVERFLOW-X: auto;}
.waitAll{position:absolute;display:none;z-index:8;}
.header{position:relative;background:#e5282e;color:#fff;height:50px;line-height:50px;text-align: center;font-size:16px;}
.content .d_d{width:100%;font-size:0;position:relative;margin-top:-3px;}
.content .d_d img{width:100%;}
.content .d_d .sty_img{width: 33.33%}
.content .d_d .sharecenterDiv{position:absolute;left:0;top:0;width:100%;z-index:1;}
.desc_div{ position: fixed; left: 0;  width: 100%;  bottom: 0;display:none;}
#actDescbut{position:relative;}
#closeBtn{position:absolute;top:0;width:10%;left:45%;}

</style>
</head>
<body style="background: #bf0029;">
  <script>
    	(function(){
	   	 var wh=$(window).height();
	       $("body").css({minHeight:wh})
	   })();
    </script>
<div class="content" id="ctext">
	<div class="d_d">
		<img alt="" src="images/dec_hasGot_01.jpg">
	</div>
	<div class="d_d">
		<img alt="" src="images/dec_hasGot_02.jpg">
	</div>
	<div class="d_d">
		<img alt="" src="images/dec_hasGot_03.jpg">
	</div>
	<div class="d_d">
		<img alt="" src="images/dec_hasGot_04.jpg">
	</div>
	<div class="d_d ">
		<img alt="" src="images/dec_hasGot_05.jpg">
	</div>
	<div class="d_d">
		<img alt="" src="images/dec_hasGot_06.jpg">
	</div>
	<!--<div class="d_d ">
		<img alt="" src="images/dec_hasGot_07.jpg">
	</div>-->
<div class="d_d shareItem">
	<img class="sty_img"  alt="" src="images/dec_hasGot_07.jpg">
	<img class="sty_img"  alt="" src="images/dec_hasGot_08.jpg">
	<img class="sty_img"  alt="" src="images/dec_hasGot_09.jpg">
</div>
		<div class="d_d " id="actDescbut">
			<img alt="" src="images/dec_hasGot_10.jpg">
		</div>
</div>
<div class="desc_div">
	<img class="desc_divimg" alt="" style="width: 100%" src="images/dec_act_desc.png">
</div>
</body>
<script>
var _surl = '${shareUrl}';
function is_weixin(){
    var ua = navigator.userAgent.toLowerCase();
    if(ua.match(/MicroMessenger/i)=="micromessenger") {
        return true;
    } else {
        return false;
    }
}
 
var browser={
    versions:function(){
      var u = navigator.userAgent, app = navigator.appVersion;
        return {
          trident: u.indexOf('Trident') > -1,
          presto: u.indexOf('Presto') > -1,
          webKit: u.indexOf('AppleWebKit') > -1,
          gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1,
          mobile: !!u.match(/AppleWebKit.*Mobile.*/),
          ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
          android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1,
          iPhone: u.indexOf('iPhone') > -1 ,
          iPad: u.indexOf('iPad') > -1,
          webApp: u.indexOf('Safari') == -1
       }
    }(),
    language:(navigator.browserLanguage || navigator.language).toLowerCase()
};
 
function init(){
    if(is_weixin()){
        //weixin为提示使用浏览器打开的div
        document.getElementById("shadeTo").style.display="block";
        document.getElementById("ctext").style.display="none";
        if(browser.versions.ios || browser.versions.iPhone || browser.versions.iPad){
            document.getElementById("desc2").innerHTML="在Safari中打开";
        }else{
            document.getElementById("desc2").innerHTML="在浏览器中打开";
        }
    }else{
        //下载页div
        document.getElementById("shadeTo").style.display="none";
    }
}
function checkWechat(){
	if(is_weixin()){
		//weixin为提示使用浏览器打开的div
        document.getElementById("shadeTo").style.display="block";
        document.getElementById("ctext").style.display="none";
        if(browser.versions.ios || browser.versions.iPhone || browser.versions.iPad){
            document.getElementById("desc2").innerHTML="在Safari中打开";
        }else{
            document.getElementById("desc2").innerHTML="在浏览器中打开";
        }
        return false;
	}else{
		document.getElementById("shadeTo").style.display="none";
		return true;
	}
}
var wechatObj = new Object();
wechatObj.title = "${shareInfo.sharedTitle}";
wechatObj.desc = "${shareInfo.sharedContent}";
wechatObj.link = _surl;
wechatObj.imgUrl = "${shareInfo.sharedImgUrl}";

wx.ready(function(){

    // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。
	wx.onMenuShareTimeline({
		title: wechatObj.desc, // 分享标题
	    link: wechatObj.link, // 分享链接
	    imgUrl: wechatObj.imgUrl, // 分享图标
	    success: function () { 
	    	closeShareDiv();
	    },
	    cancel: function () {}
	});
    
	wx.onMenuShareAppMessage({
		title: wechatObj.title, // 分享标题
		desc: wechatObj.desc, // 分享描述
	    link: wechatObj.link, // 分享链接
	    imgUrl: wechatObj.imgUrl, // 分享图标
	    success: function () { 
	    	closeShareDiv();
	    },
	    cancel: function () {}
	});
    
	wx.onMenuShareQQ({
		title: wechatObj.title, // 分享标题
		desc: wechatObj.desc, // 分享描述
	    link: wechatObj.link, // 分享链接
	    imgUrl: wechatObj.imgUrl, // 分享图标
	    success: function () { 
	    	closeShareDiv();
	    },
	    cancel: function () {}
	});
	wx.onMenuShareWeibo({
		title: wechatObj.title, // 分享标题
		desc: wechatObj.desc, // 分享描述
	    link: wechatObj.link, // 分享链接
	    imgUrl: wechatObj.imgUrl, // 分享图标
	    success: function () { 
	    	closeShareDiv();
	    },
	    cancel: function () {}
	});
    
});
function closeShareDiv(){
	$("#shareRemind").hide();
	$(".shareContent").hide();
}
$(function(){
	shadeAll();
	$.ajax({url:"http://store.ykd365.com/weixin/wechat/getwxjssign?",data:{url: location.href.split('#')[0]},success:function(wechatReturn){
		closeShade();
		if (wechatReturn) {
			wx.config({
			    debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
			    appId: 'wxade8c5e473c645e9', // 必填，公众号的唯一标识
			    timestamp: wechatReturn.timestamp, // 必填，生成签名的时间戳
			    nonceStr: wechatReturn.nonceStr, // 必填，生成签名的随机串
			    signature: wechatReturn.signature,// 必填，签名，见附录1
			    jsApiList: ["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]// 必填，需要使用的JS接口列表，所有JS接口列表见附录2
			});
		}
	},error:function(){
		closeShade();
	}});

	$(".shareItem img").click(function(){
		if ($("#shareRemind").length<=0) {
			$("body").append('<div class="shareRemind" id="shareRemind" style="background-color:#4E484C;"></div>');
			$("body").append('<div class="shareContent" style="background:url(images/redenvelope_sharejt.png) 92% 15px no-repeat;background-size:85px;"><div style="font-size:16px;color:#FFD900;margin-top:100px;text-align:center;">点击右上角，送出100元大红包</div><img src="images/redenvelope_know.png" style="width:150px;margin-top:30px;"></div>');
		}
		$(".shareContent").css("height",$(document).height());
		$("#shareRemind").css("height",$(document).height());
		$("#shareRemind").show();
		$(".shareContent").show();
	});
	$("body").delegate(".shareContent","click",function(){
		$("#shareRemind").hide();
		$(".shareContent").hide();
	});

	/*活动说明点击事件*/
	$("#actDescbut").on("click",function(){
		$(".desc_div").show();
	});
	$("body").on("click",".desc_divimg",function(){
		$(".desc_div").hide();
	});
})

</script>
</html>